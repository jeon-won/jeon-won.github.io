{"componentChunkName":"component---src-templates-post-jsx","path":"/system/linux/rockylinux9-filesystem-setting/","result":{"data":{"site":{"siteMetadata":{"title":"jeonwon.dev","author":"Jeon Won"}},"markdownRemark":{"id":"82f9ea94-66b1-5953-a62f-f51860f0d81b","excerpt":"CentOS 서버 이관용 Rocky Linux 9 가상화 서버 만들다가 배운 걸 정리한 글. 제대로 이해한건지 모르겠으나... 암튼 정리해봄. 😵‍💫 🔠 용어 설명 LVM(Logical Volume Manager…","html":"<p><a href=\"https://www.instagram.com/25_jw/\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEAv/EABcBAAMBAAAAAAAAAAAAAAAAAAACAwH/2gAMAwEAAhADEAAAAZaOdca4kjLe4bjAn//EABoQAAMAAwEAAAAAAAAAAAAAAAABAgMSIRH/2gAIAQEAAQUCkZ0iCsc61xyyqevh/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERECH/2gAIAQMBAT8BXFCjz//EABcRAAMBAAAAAAAAAAAAAAAAAAERIDH/2gAIAQIBAT8BOuP/xAAZEAACAwEAAAAAAAAAAAAAAAABEAARMSD/2gAIAQEABj8C4uiJq1f/xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMWHB0f/aAAgBAQABPyHWplw2fCBTGA57BIM7ZaghBI0XwlHWf//aAAwDAQACAAMAAAAQP/A8/8QAGREAAwADAAAAAAAAAAAAAAAAAAEhETFB/9oACAEDAQE/EHo6Oh3kez//xAAZEQEAAwEBAAAAAAAAAAAAAAABABEhEEH/2gAIAQIBAT8QV0eQL2Abz//EABwQAQADAQEAAwAAAAAAAAAAAAEAESExcUFhof/aAAgBAQABPxBiKSOBe+exl0U+is39hcARYs0p4hCsDd93072JqKIAD1gIjRTD4ailDbn/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"너 공부 싫어하지? (어... 어떻게 알았지?) 출처: https://www.instagram.com/25_jw/\"\n        title=\"\"\n        src=\"/static/9a4135b7acc22318a35ad168d30bc6e5/6aca1/25jw-do-you-hate-study.jpg\"\n        srcset=\"/static/9a4135b7acc22318a35ad168d30bc6e5/d2f63/25jw-do-you-hate-study.jpg 163w,\n/static/9a4135b7acc22318a35ad168d30bc6e5/c989d/25jw-do-you-hate-study.jpg 325w,\n/static/9a4135b7acc22318a35ad168d30bc6e5/6aca1/25jw-do-you-hate-study.jpg 650w,\n/static/9a4135b7acc22318a35ad168d30bc6e5/7c09c/25jw-do-you-hate-study.jpg 975w,\n/static/9a4135b7acc22318a35ad168d30bc6e5/47311/25jw-do-you-hate-study.jpg 1080w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></a></p>\n<p>CentOS 서버 이관용 Rocky Linux 9 가상화 서버 만들다가 배운 걸 정리한 글. 제대로 이해한건지 모르겠으나... 암튼 정리해봄. 😵‍💫</p>\n<h2 id=\"-용어-설명\" style=\"position:relative;\"><a href=\"#-%EC%9A%A9%EC%96%B4-%EC%84%A4%EB%AA%85\" aria-label=\" 용어 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔠 용어 설명</h2>\n<ul>\n<li>LVM(Logical Volume Manager): 디스크를 논리적으로 구성하기 위한 기능</li>\n<li>디스크: 데이터를 저장하는 실제 하드웨어\n<ul>\n<li><code class=\"language-text\">/dev/sda</code>, <code class=\"language-text\">/dev/sdb</code> 등의 장치 파일로 표현됨</li>\n</ul>\n</li>\n<li>파티션: 디스크를 논리적으로 나눈 구역\n<ul>\n<li><code class=\"language-text\">/dev/sda1</code>, <code class=\"language-text\">/dev/sdb2</code> 등의 장치 파일로 표현됨</li>\n</ul>\n</li>\n<li>물리볼륨(PV, Physical Volume): 디스크나 파티션을 초기화한 것</li>\n<li>볼륨그룹(VG, Volume Group): 하나 또는 여러 개의 물리볼륨(PV)를 포함하는 그룹</li>\n<li>논리볼륨(LV, Logical Volume): 볼륨그룹의 공간 전체 또는 일부를 분할하여 파일시스템 등으로 사용할 수 있도록 할당된 논리 공간\n<ul>\n<li>볼륨그룹과 논리볼륨을 생성하면 <code class=\"language-text\">/dev/mapper/</code> 경로에 파일로 표현됨</li>\n</ul>\n</li>\n<li>파일시스템: 파일들이 디스크 상에서 구성되는 방식\n<ul>\n<li>RHEL 6 및 CentOS 6 버전의 기본 파일시스템은 ext4</li>\n<li>RHEL 7 및 CentOS 7 버전 이후의 기본 파일시스템은 xfs</li>\n<li>Rocky Linux 9 버전의 기본 파일시스템도 xfs</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-디스크-파티션-및-볼륨-정보-조회\" style=\"position:relative;\"><a href=\"#-%EB%94%94%EC%8A%A4%ED%81%AC-%ED%8C%8C%ED%8B%B0%EC%85%98-%EB%B0%8F-%EB%B3%BC%EB%A5%A8-%EC%A0%95%EB%B3%B4-%EC%A1%B0%ED%9A%8C\" aria-label=\" 디스크 파티션 및 볼륨 정보 조회 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👀 디스크, 파티션 및 볼륨 정보 조회</h2>\n<p><code class=\"language-text\">lsblk</code> 명령어를 사용하면 사용 중인 디스크, 파티션, 볼륨그룹(VG) 및 논리볼륨을(LV) 계층별로 조회해볼 수 있음.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lsblk\nNAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS\nsda           <span class=\"token number\">8</span>:0    <span class=\"token number\">0</span>   200G  <span class=\"token number\">0</span> disk            <span class=\"token comment\"># 파티션 분할된 디스크</span>\n├─sda1        <span class=\"token number\">8</span>:1    <span class=\"token number\">0</span>   600M  <span class=\"token number\">0</span> part /boot/efi  <span class=\"token comment\"># 파티션 1 ~ 3</span>\n├─sda2        <span class=\"token number\">8</span>:2    <span class=\"token number\">0</span>     1G  <span class=\"token number\">0</span> part /boot\n└─sda3        <span class=\"token number\">8</span>:3    <span class=\"token number\">0</span> <span class=\"token number\">198</span>.4G  <span class=\"token number\">0</span> part\n  ├─rl-root <span class=\"token number\">253</span>:0    <span class=\"token number\">0</span> <span class=\"token number\">184</span>.4G  <span class=\"token number\">0</span> lvm  /          <span class=\"token comment\"># VG-LV(예: rl은 Volume Group 이름, root는 Logical Volume 이름)</span>\n  └─rl-swap <span class=\"token number\">253</span>:1    <span class=\"token number\">0</span>    14G  <span class=\"token number\">0</span> lvm  <span class=\"token punctuation\">[</span>SWAP<span class=\"token punctuation\">]</span>\nsdb           <span class=\"token number\">8</span>:16   <span class=\"token number\">0</span>   300G  <span class=\"token number\">0</span> disk            <span class=\"token comment\"># 파티션 분할 안 된 디스크</span></code></pre></div>\n<p><code class=\"language-text\">df -TH</code> 명령어를 사용하면 사용 중인 파일시스템을 조회해볼 수 있음.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">df</span> <span class=\"token parameter variable\">-TH</span>\nFilesystem          Type      Size  Used Avail Use% Mounted on\ndevtmpfs            devtmpfs  <span class=\"token number\">4</span>.1G     <span class=\"token number\">0</span>  <span class=\"token number\">4</span>.1G   <span class=\"token number\">0</span>% /dev\ntmpfs               tmpfs     <span class=\"token number\">4</span>.1G     <span class=\"token number\">0</span>  <span class=\"token number\">4</span>.1G   <span class=\"token number\">0</span>% /dev/shm\ntmpfs               tmpfs     <span class=\"token number\">4</span>.1G  236M  <span class=\"token number\">3</span>.8G   <span class=\"token number\">6</span>% /run\ntmpfs               tmpfs     <span class=\"token number\">4</span>.1G     <span class=\"token number\">0</span>  <span class=\"token number\">4</span>.1G   <span class=\"token number\">0</span>% /sys/fs/cgroup\n/dev/mapper/rl-root xfs       184G   23G  161G  <span class=\"token number\">13</span>% /          <span class=\"token comment\"># /dev/mapper/볼륨그룹(VG)이름-논리볼륨(LV)이름</span>\n/dev/mapper/rl-logs xfs        22G  186M   22G   <span class=\"token number\">1</span>% /logs\n/dev/sda1           vfat      628M  <span class=\"token number\">6</span>.0M  622M   <span class=\"token number\">1</span>% /boot/efi  <span class=\"token comment\"># /dev/sdX: 디스크</span>\n/dev/sda2           xfs       <span class=\"token number\">1</span>.1G  190M  875M  <span class=\"token number\">18</span>% /boot      <span class=\"token comment\"># /dev/sdXx: 파티션</span>\ntmpfs               tmpfs     805M     <span class=\"token number\">0</span>  805M   <span class=\"token number\">0</span>% /run/user/0</code></pre></div>\n<h2 id=\"️-디스크-추가-후-파일시스템-마운트-해보기\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EB%94%94%EC%8A%A4%ED%81%AC-%EC%B6%94%EA%B0%80-%ED%9B%84-%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%A7%88%EC%9A%B4%ED%8A%B8-%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"️ 디스크 추가 후 파일시스템 마운트 해보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🛠️ 디스크 추가 후 파일시스템 마운트 해보기</h2>\n<p>과정은 다음과 같음.</p>\n<ol>\n<li><code class=\"language-text\">fdisk</code> 명령어로 파티션 생성</li>\n<li><code class=\"language-text\">pvcreate</code> 명령어로 물리볼륨(PV) 생성</li>\n<li><code class=\"language-text\">vgcreate</code> 명령어로 볼륨그룹(VG) 생성</li>\n<li><code class=\"language-text\">lvcreate</code> 명령어로 논리볼륨(LV) 생성</li>\n<li><code class=\"language-text\">mkfs</code> 명령어로 파일시스템 생성</li>\n<li><code class=\"language-text\">mount</code> 명령어로 파일시스템 마운트</li>\n</ol>\n<p>먼저 <code class=\"language-text\">lsblk</code> 명령어로 서버에 장착된 디스크 확인. <strong>여기선 <code class=\"language-text\">/dev/sdb</code> 디스크를 xfs 파일시스템을 사용하여 마운트 해볼 것임.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lsblk\nNAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS\nsda           <span class=\"token number\">8</span>:0    <span class=\"token number\">0</span>   116G  <span class=\"token number\">0</span> disk             <span class=\"token comment\"># 파티션(sda1, sda2, sda3) 설정 된 디스크</span>\n├─sda1        <span class=\"token number\">8</span>:1    <span class=\"token number\">0</span>   600M  <span class=\"token number\">0</span> part /boot/efi\n├─sda2        <span class=\"token number\">8</span>:2    <span class=\"token number\">0</span>     1G  <span class=\"token number\">0</span> part /boot\n└─sda3        <span class=\"token number\">8</span>:3    <span class=\"token number\">0</span> <span class=\"token number\">114</span>.4G  <span class=\"token number\">0</span> part\n  ├─rl-root <span class=\"token number\">253</span>:0    <span class=\"token number\">0</span> <span class=\"token number\">100</span>.4G  <span class=\"token number\">0</span> lvm  /\n  └─rl-swap <span class=\"token number\">253</span>:1    <span class=\"token number\">0</span>    14G  <span class=\"token number\">0</span> lvm  <span class=\"token punctuation\">[</span>SWAP<span class=\"token punctuation\">]</span>\nsdb           <span class=\"token number\">8</span>:16   <span class=\"token number\">0</span>   200G  <span class=\"token number\">0</span> disk             <span class=\"token comment\"># 파티션 설정 안 된 디스크 → 이걸 마운트해볼 것임</span></code></pre></div>\n<p><code class=\"language-text\">fdisk</code> 명령어로 Linux LVM 타입의 파티션 생성.</p>\n<p><strong>아래는 하나의 디스크에 파티션을 두 개 만드는 경우를 설명</strong>한 것이며, 하나의 디스크에 한 개의 파티션만 만드는 경우 파티션을 만들지 않고 바로 물리볼륨 생성 단계로 넘어가도 됨. (한 개의 파티션만 만들면 나중에 lsblk 명령어 실행 시 그래프가 지저분하게 보일 듯 😅)</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 디스크 정보 조회</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">fdisk</span> <span class=\"token parameter variable\">-l</span> /dev/sdb\nDisk /dev/sdb: <span class=\"token number\">200</span> GiB, <span class=\"token number\">214748364800</span> bytes, <span class=\"token number\">419430400</span> sectors\nDisk model: Virtual disk\nUnits: sectors of <span class=\"token number\">1</span> * <span class=\"token number\">512</span> <span class=\"token operator\">=</span> <span class=\"token number\">512</span> bytes\nSector size <span class=\"token punctuation\">(</span>logical/physical<span class=\"token punctuation\">)</span>: <span class=\"token number\">512</span> bytes / <span class=\"token number\">512</span> bytes\nI/O size <span class=\"token punctuation\">(</span>minimum/optimal<span class=\"token punctuation\">)</span>: <span class=\"token number\">512</span> bytes / <span class=\"token number\">512</span> bytes</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 디스크 파티션 설정</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">fdisk</span> /dev/sdb\n\nWelcome to <span class=\"token function\">fdisk</span> <span class=\"token punctuation\">(</span>util-linux <span class=\"token number\">2.37</span>.4<span class=\"token punctuation\">)</span>.\nChanges will remain <span class=\"token keyword\">in</span> memory only, <span class=\"token keyword\">until</span> you decide to <span class=\"token function\">write</span> them.\nBe careful before using the <span class=\"token function\">write</span> command.\n\nDevice does not contain a recognized partition table.\nCreated a new DOS disklabel with disk identifier 0xf0d74294.\n\n\n<span class=\"token comment\"># 첫 번째 파티션 만들기</span>\nCommand <span class=\"token punctuation\">(</span>m <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">help</span><span class=\"token punctuation\">)</span>: n  <span class=\"token comment\">## n: New</span>\nPartition <span class=\"token builtin class-name\">type</span>\n   p   primary <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> primary, <span class=\"token number\">0</span> extended, <span class=\"token number\">4</span> <span class=\"token function\">free</span><span class=\"token punctuation\">)</span>\n   e   extended <span class=\"token punctuation\">(</span>container <span class=\"token keyword\">for</span> logical partitions<span class=\"token punctuation\">)</span>\nSelect <span class=\"token punctuation\">(</span>default p<span class=\"token punctuation\">)</span>: p                         <span class=\"token comment\">## 기본 파티션 만들 것임</span>\nPartition number <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>-4, default <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>: <span class=\"token number\">1</span>          <span class=\"token comment\">## 첫 번째 파티션</span>\nFirst sector <span class=\"token punctuation\">(</span><span class=\"token number\">2048</span>-419430399, default <span class=\"token number\">2048</span><span class=\"token punctuation\">)</span>:  <span class=\"token comment\">## 시작 섹터. 기본 값 엔터.</span>\nLast sector, +/-sectors or +/-size<span class=\"token punctuation\">{</span>K,M,G,T,P<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2048</span>-419430399, default <span class=\"token number\">419430399</span><span class=\"token punctuation\">)</span>: +50G  <span class=\"token comment\">## 마지막 섹터. 원하는 파티션 용량 입력.</span>\n\nCreated a new partition <span class=\"token number\">1</span> of <span class=\"token builtin class-name\">type</span> <span class=\"token string\">'Linux'</span> and of size <span class=\"token number\">50</span> GiB.\n\n\n<span class=\"token comment\"># 두 번째 파티션 만들기</span>\nCommand <span class=\"token punctuation\">(</span>m <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">help</span><span class=\"token punctuation\">)</span>: n  <span class=\"token comment\">## n: New</span>\nPartition <span class=\"token builtin class-name\">type</span>\n   p   primary <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> primary, <span class=\"token number\">0</span> extended, <span class=\"token number\">3</span> <span class=\"token function\">free</span><span class=\"token punctuation\">)</span>\n   e   extended <span class=\"token punctuation\">(</span>container <span class=\"token keyword\">for</span> logical partitions<span class=\"token punctuation\">)</span>\nSelect <span class=\"token punctuation\">(</span>default p<span class=\"token punctuation\">)</span>: p                                   <span class=\"token comment\">## 기본 파티션 만들 것임</span>\nPartition number <span class=\"token punctuation\">(</span><span class=\"token number\">2</span>-4, default <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>: <span class=\"token number\">2</span>                    <span class=\"token comment\">## 두 번째 파티션</span>\nFirst sector <span class=\"token punctuation\">(</span><span class=\"token number\">104859648</span>-419430399, default <span class=\"token number\">104859648</span><span class=\"token punctuation\">)</span>:  <span class=\"token comment\">## 시작 섹터. 기본 값 엔터.</span>\nLast sector, +/-sectors or +/-size<span class=\"token punctuation\">{</span>K,M,G,T,P<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">(</span><span class=\"token number\">104859648</span>-419430399, default <span class=\"token number\">419430399</span><span class=\"token punctuation\">)</span>:  <span class=\"token comment\">## 마지막 섹터. 엔터 치면 할당 가능한 최대 용량이 할당됨</span>\n\nCreated a new partition <span class=\"token number\">2</span> of <span class=\"token builtin class-name\">type</span> <span class=\"token string\">'Linux'</span> and of size <span class=\"token number\">150</span> GiB.\n\n\n<span class=\"token comment\"># 첫 번째 파티션 타입 설정</span>\nCommand <span class=\"token punctuation\">(</span>m <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">help</span><span class=\"token punctuation\">)</span>: t                    <span class=\"token comment\">## t: Type</span>\nPartition number <span class=\"token punctuation\">(</span><span class=\"token number\">1,2</span>, default <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>: <span class=\"token number\">1</span>       <span class=\"token comment\">## 첫 번째 파티션</span>\nHex code or <span class=\"token builtin class-name\">alias</span> <span class=\"token punctuation\">(</span>type L to list all<span class=\"token punctuation\">)</span>: L  <span class=\"token comment\">## L: 모든 파티션 타입 출력</span>\n<span class=\"token comment\">## 출력내용 생략...</span>\nAliases:\n   linux          - <span class=\"token number\">83</span>\n   swap           - <span class=\"token number\">82</span>\n   extended       - 05\n   uefi           - EF\n   raid           - FD\n   lvm            - 8E  <span class=\"token comment\">## 8e Linux LVM으로 설정할 거임</span>\n   linuxex        - <span class=\"token number\">85</span>\nHex code or <span class=\"token builtin class-name\">alias</span> <span class=\"token punctuation\">(</span>type L to list all<span class=\"token punctuation\">)</span>: 8e  <span class=\"token comment\">## 8e 입력</span>\n\nChanged <span class=\"token builtin class-name\">type</span> of partition <span class=\"token string\">'Linux'</span> to <span class=\"token string\">'Linux LVM'</span><span class=\"token builtin class-name\">.</span>\n\n<span class=\"token comment\"># 두 번째 파티션 타입 설정</span>\nCommand <span class=\"token punctuation\">(</span>m <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">help</span><span class=\"token punctuation\">)</span>: t                     <span class=\"token comment\">## t: type</span>\nPartition number <span class=\"token punctuation\">(</span><span class=\"token number\">1,2</span>, default <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>: <span class=\"token number\">2</span>        <span class=\"token comment\">## 두 번째 파티션</span>\nHex code or <span class=\"token builtin class-name\">alias</span> <span class=\"token punctuation\">(</span>type L to list all<span class=\"token punctuation\">)</span>: 8e  <span class=\"token comment\">## 8e 입력</span>\n\nChanged <span class=\"token builtin class-name\">type</span> of partition <span class=\"token string\">'Linux'</span> to <span class=\"token string\">'Linux LVM'</span><span class=\"token builtin class-name\">.</span>\n\n\n<span class=\"token comment\"># 저장</span>\nCommand <span class=\"token punctuation\">(</span>m <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">help</span><span class=\"token punctuation\">)</span>: w  <span class=\"token comment\">## w: Write</span>\nThe partition table has been altered.\nCalling ioctl<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> to re-read partition table.\nSyncing disks.</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 파티션 잘 생성됐는지 못 믿겠으면 한번 확인</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">fdisk</span> <span class=\"token parameter variable\">-l</span> /dev/sdb1\nDisk /dev/sdb1: <span class=\"token number\">50</span> GiB, <span class=\"token number\">53687091200</span> bytes, <span class=\"token number\">104857600</span> sectors\nUnits: sectors of <span class=\"token number\">1</span> * <span class=\"token number\">512</span> <span class=\"token operator\">=</span> <span class=\"token number\">512</span> bytes\nSector size <span class=\"token punctuation\">(</span>logical/physical<span class=\"token punctuation\">)</span>: <span class=\"token number\">512</span> bytes / <span class=\"token number\">512</span> bytes\nI/O size <span class=\"token punctuation\">(</span>minimum/optimal<span class=\"token punctuation\">)</span>: <span class=\"token number\">512</span> bytes / <span class=\"token number\">512</span> bytes\n\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">fdisk</span> <span class=\"token parameter variable\">-l</span> /dev/sdb2\n<span class=\"token comment\"># 생략...</span></code></pre></div>\n<p>파티션을 생성했다면 <code class=\"language-text\">pvcreate</code> 명령어로 물리볼륨(PV) 생성.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># /dev/sdb1 파티션을 물리볼륨(PV)으로 초기화</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> pvcreate /dev/sdb1\n  Physical volume <span class=\"token string\">\"/dev/sdb1\"</span> successfully created.\n\n<span class=\"token comment\"># (참고) 파티션 분할하지 않은 /dev/sdb 디스크 전체를 물리볼륨(PV)으로 초기화</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> pvcreate /dev/sdb\n  Physical volume <span class=\"token string\">\"/dev/sdb\"</span> successfully created.\n\n<span class=\"token comment\"># 물리볼륨 잘 생성 됐는지 못 믿겠으면 pvdisplay 명령어로 확인</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> pvdisplay /dev/sdb1\n  <span class=\"token string\">\"/dev/sdb1\"</span> is a new physical volume of <span class=\"token string\">\"50.00 GiB\"</span>\n  --- NEW Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name\n  PV Size               <span class=\"token number\">50.00</span> GiB\n  Allocatable           NO\n  PE Size               <span class=\"token number\">0</span>\n  Total PE              <span class=\"token number\">0</span>\n  Free PE               <span class=\"token number\">0</span>\n  Allocated PE          <span class=\"token number\">0</span>\n  PV UUID               rOcKy-48uM-ag19-sgCU-8Iju-eFAi-lInUx9\n\n<span class=\"token comment\"># 적을 공간이 부족(?)하여 이제 /dev/sdb2 파티션 관련 작업 설명은 생략... 알아서 해보셈 🤗</span></code></pre></div>\n<p>물리볼륨(PV)을 생성했다면 <code class=\"language-text\">vgcreate</code> 명령어로 볼륨그룹(VG) 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># /dev/sdb1 파티션을 포함하는 datavg 라는 이름의 볼륨그룹(VG) 생성</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> vgcreate datavg /dev/sdb1\n  Volume group <span class=\"token string\">\"datavg\"</span> successfully created\n\n<span class=\"token comment\"># (참고) 볼륨그룹은 여러 개의 물리볼륨을 포함할 수 있음</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> vgcreate datavg /dev/sdb1 /dev/sdb2 /dev/sdb3\n\n<span class=\"token comment\"># 볼륨그룹 절 생성 됐는지 못 믿겠으면 vgdisplay 명령어로 확인</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> vgdisplay datavg\n  --- Volume group ---\n  VG Name               datavg\n  System ID\n  Format                lvm2\n  Metadata Areas        <span class=\"token number\">1</span>\n  Metadata Sequence No  <span class=\"token number\">1</span>\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                <span class=\"token number\">0</span>\n  Cur LV                <span class=\"token number\">0</span>\n  Open LV               <span class=\"token number\">0</span>\n  Max PV                <span class=\"token number\">0</span>\n  Cur PV                <span class=\"token number\">1</span>\n  Act PV                <span class=\"token number\">1</span>\n  VG Size               <span class=\"token operator\">&lt;</span><span class=\"token number\">50.00</span> GiB\n  PE Size               <span class=\"token number\">4.00</span> MiB\n  Total PE              <span class=\"token number\">12799</span>\n  Alloc PE / Size       <span class=\"token number\">0</span> / <span class=\"token number\">0</span>\n  Free  PE / Size       <span class=\"token number\">12799</span> / <span class=\"token operator\">&lt;</span><span class=\"token number\">50.00</span> GiB\n  VG UUID               rOkCy-2N5D-gR18-Inmb-Ceoh-1MwG-lInUx</code></pre></div>\n<p>볼륨그룹(VG)을 생성했다면 <code class=\"language-text\">lvcreate</code> 명령어로 논리볼륨(LV) 생성.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># datavg 볼륨그룹(VG)에 data1이라는 이름의 논리볼륨(LV)을 20GB만큼 생성</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lvcreate <span class=\"token parameter variable\">-n</span> data1 <span class=\"token parameter variable\">-L</span> 20G datavg\n  Logical volume <span class=\"token string\">\"data1\"</span> created.\n\n<span class=\"token comment\"># datavg 볼륨그룹(VG)에 data2이라는 이름의 논리볼륨(LV)을 남아있는 모든 공간을 사용하여 생성</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lvcreate <span class=\"token parameter variable\">-n</span> data2 <span class=\"token parameter variable\">-l</span> <span class=\"token number\">100</span>%FREE datavg\n  Logical volume <span class=\"token string\">\"data2\"</span> created.\n\n<span class=\"token comment\"># (참고) datavg 볼륨그룹(VG)에 data3이라는 이름의 논리볼륨(LV)을 /dev/sdb1 물리볼륨(PV)에 남아있는 모든 공간을 사용하여 생성</span>\n<span class=\"token comment\"># 여러 개의 물리볼륨(PV)을 갖고 있는 볼륨그룹(VG)에 논리볼륨(LV)을 만들 때 매핑용(논리볼륨 → 물리볼륨)으로 쓰면 좋을 듯</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lvcreate <span class=\"token parameter variable\">-n</span> data3 <span class=\"token parameter variable\">-l</span> <span class=\"token number\">100</span>%FREE datavg /dev/sdb1\n  Logical volume <span class=\"token string\">\"data3\"</span> created.\n\n<span class=\"token comment\"># 논리볼륨 잘 생성 됐는지 못 믿겠으면 lvdisplay 명령어로 확인</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lvdisplay /dev/mapper/datavg-data1\n  --- Logical volume ---\n  LV Path                /dev/datavg/data1\n  LV Name                data1\n  VG Name                datavg\n  LV UUID                rOcKy-aYdk-qnEK-nHdG-f7xJ-B4uL-lInUx\n  LV Write Access        read/write\n  LV Creation host, <span class=\"token function\">time</span> rockyhost, <span class=\"token number\">2024</span>-09-11 <span class=\"token number\">17</span>:51:50 +0900\n  LV Status              available\n  <span class=\"token comment\"># open                 0</span>\n  LV Size                <span class=\"token number\">20.00</span> GiB\n  Current LE             <span class=\"token number\">5120</span>\n  Segments               <span class=\"token number\">1</span>\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently <span class=\"token builtin class-name\">set</span> to     <span class=\"token number\">256</span>\n  Block device           <span class=\"token number\">253</span>:2\n</code></pre></div>\n<p>논리볼륨(LV)을 생성했으면 <code class=\"language-text\">mkfs.xfs</code> 명령어로 xfs 파일 시스템 생성. (ext4 파일시스템을 생성하려면 <code class=\"language-text\">mkfs.ext4</code>)</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># datavg 볼륨그룹(VG)에 있는 data1 논리볼륨(LV)에 xfs 파일시스템 생성</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> mkfs.xfs /dev/mapper/datavg-data1\nmeta-data<span class=\"token operator\">=</span>/dev/mapper/datavg-data1 <span class=\"token assign-left variable\">isize</span><span class=\"token operator\">=</span><span class=\"token number\">512</span>    <span class=\"token assign-left variable\">agcount</span><span class=\"token operator\">=</span><span class=\"token number\">4</span>, <span class=\"token assign-left variable\">agsize</span><span class=\"token operator\">=</span><span class=\"token number\">1310720</span> blks\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">sectsz</span><span class=\"token operator\">=</span><span class=\"token number\">512</span>   <span class=\"token assign-left variable\">attr</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>, <span class=\"token assign-left variable\">projid32bit</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">crc</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>        <span class=\"token assign-left variable\">finobt</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>, <span class=\"token assign-left variable\">sparse</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>, <span class=\"token assign-left variable\">rmapbt</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">reflink</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>    <span class=\"token assign-left variable\">bigtime</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">inobtcount</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">nrext64</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\ndata     <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">bsize</span><span class=\"token operator\">=</span><span class=\"token number\">4096</span>   <span class=\"token assign-left variable\">blocks</span><span class=\"token operator\">=</span><span class=\"token number\">5242880</span>, <span class=\"token assign-left variable\">imaxpct</span><span class=\"token operator\">=</span><span class=\"token number\">25</span>\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">sunit</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>      <span class=\"token assign-left variable\">swidth</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> blks\nnaming   <span class=\"token operator\">=</span>version <span class=\"token number\">2</span>              <span class=\"token assign-left variable\">bsize</span><span class=\"token operator\">=</span><span class=\"token number\">4096</span>   ascii-ci<span class=\"token operator\">=</span><span class=\"token number\">0</span>, <span class=\"token assign-left variable\">ftype</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\nlog      <span class=\"token operator\">=</span>internal log           <span class=\"token assign-left variable\">bsize</span><span class=\"token operator\">=</span><span class=\"token number\">4096</span>   <span class=\"token assign-left variable\">blocks</span><span class=\"token operator\">=</span><span class=\"token number\">16384</span>, <span class=\"token assign-left variable\">version</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">sectsz</span><span class=\"token operator\">=</span><span class=\"token number\">512</span>   <span class=\"token assign-left variable\">sunit</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> blks, lazy-count<span class=\"token operator\">=</span><span class=\"token number\">1</span>\nrealtime <span class=\"token operator\">=</span>none                   <span class=\"token assign-left variable\">extsz</span><span class=\"token operator\">=</span><span class=\"token number\">4096</span>   <span class=\"token assign-left variable\">blocks</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>, <span class=\"token assign-left variable\">rtextents</span><span class=\"token operator\">=</span><span class=\"token number\">0</span></code></pre></div>\n<p>파일시스템을 생성했다면 디렉터리 생성 후 마운트.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 디렉터리 생성</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">mkdir</span> /data1\n\n<span class=\"token comment\"># 논리볼륨(LV)을 디렉터리에 마운트</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">mount</span> /dev/mapper/datavg-data1 /data1\n\n<span class=\"token comment\"># 마운트 잘 됐는지 못 믿겠으면 df 명령어로 확인</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">df</span> <span class=\"token parameter variable\">-TH</span>\nFilesystem               Type      Size  Used Avail Use% Mounted on\ndevtmpfs                 devtmpfs  <span class=\"token number\">4</span>.2M     <span class=\"token number\">0</span>  <span class=\"token number\">4</span>.2M   <span class=\"token number\">0</span>% /dev\ntmpfs                    tmpfs     <span class=\"token number\">4</span>.1G     <span class=\"token number\">0</span>  <span class=\"token number\">4</span>.1G   <span class=\"token number\">0</span>% /dev/shm\ntmpfs                    tmpfs     <span class=\"token number\">1</span>.7G   12M  <span class=\"token number\">1</span>.6G   <span class=\"token number\">1</span>% /run\n/dev/mapper/rl-root      xfs       108G  <span class=\"token number\">6</span>.6G  102G   <span class=\"token number\">7</span>% /\n/dev/sda2                xfs       <span class=\"token number\">1</span>.1G  307M  701M  <span class=\"token number\">31</span>% /boot\n/dev/sda1                vfat      628M  <span class=\"token number\">7</span>.4M  621M   <span class=\"token number\">2</span>% /boot/efi\ntmpfs                    tmpfs     805M  132k  805M   <span class=\"token number\">1</span>% /run/user/1000\n/dev/mapper/datavg-data1 xfs        22G  184M   22G   <span class=\"token number\">1</span>% /data1\n/dev/mapper/datavg-data2 xfs        33G  258M   32G   <span class=\"token number\">1</span>% /data2</code></pre></div>\n<p>서버 재기동 시 파일시스템이 자동 마운트되도록 <code class=\"language-text\">/etc/fstab</code> 파일에 등록</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 아래와 같이 입력</span>\n/dev/mapper/datavg-data1  /data1  xfs  defaults  <span class=\"token number\">0</span>  <span class=\"token number\">0</span></code></pre></div>\n<p><code class=\"language-text\">systemctl daemon-reload</code> 명령어로 수정된 fstab 파일을 반영하거나 재부팅하여 파일시스템이 자동으로 마운트 되는지 최종 확인.</p>\n<h2 id=\"-파일시스템-용량-확장\" style=\"position:relative;\"><a href=\"#-%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9A%A9%EB%9F%89-%ED%99%95%EC%9E%A5\" aria-label=\" 파일시스템 용량 확장 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔍 파일시스템 용량 확장</h2>\n<p>물리 디스크에 할당되지 않은 공간이 있을 때 이를 활용하는 과정은 다음과 같음.</p>\n<ol>\n<li><code class=\"language-text\">growpart</code> 명령어로 파티션 크기 확장</li>\n<li><code class=\"language-text\">pvresize</code> 명령어로 물리볼륨(PV) 크기 조정</li>\n<li><code class=\"language-text\">lvextend</code> 명령어로 논리볼륨(LV) 크기 확장</li>\n<li><code class=\"language-text\">xfs_growfs</code> 명령어(또는 <code class=\"language-text\">resize2fs</code> 명령어)로 파일시스템 크기 확장.</li>\n</ol>\n<p>먼저 <code class=\"language-text\">lsblk</code>, <code class=\"language-text\">df -h</code> 또는 <code class=\"language-text\">fdisk -l</code> 명령어로 용량 확장할 파일시스템 확인. <strong>여기선 /dev/sda3 디스크 파티션의 rl-root 볼륨그룹(VG)-논리볼륨(LV)의 용량을 늘린다고 가정함.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 파티션, VG(볼륨그룹) 및 LV(논리볼륨) 확인</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lsblk\nNAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS\nsda           <span class=\"token number\">8</span>:0    <span class=\"token number\">0</span>   200G  <span class=\"token number\">0</span> disk             <span class=\"token comment\"># /dev/sda 디스크 총 용량이 200G인데</span>\n├─sda1        <span class=\"token number\">8</span>:1    <span class=\"token number\">0</span>   600M  <span class=\"token number\">0</span> part /boot/efi   <span class=\"token comment\"># sda1 ~ 3 파티션 용량 모두 합치면 200GB가 안 됨</span>\n├─sda2        <span class=\"token number\">8</span>:2    <span class=\"token number\">0</span>     1G  <span class=\"token number\">0</span> part /boot       <span class=\"token comment\"># 즉 할당되지 않은 공간이 있음</span>\n└─sda3        <span class=\"token number\">8</span>:3    <span class=\"token number\">0</span> <span class=\"token number\">114</span>.4G  <span class=\"token number\">0</span> part \n  ├─rl-root <span class=\"token number\">253</span>:0    <span class=\"token number\">0</span> <span class=\"token number\">100</span>.4G  <span class=\"token number\">0</span> lvm  /           <span class=\"token comment\"># 이걸 늘릴 것임</span>\n  └─rl-swap <span class=\"token number\">253</span>:1    <span class=\"token number\">0</span>    14G  <span class=\"token number\">0</span> lvm  <span class=\"token punctuation\">[</span>SWAP<span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 파일시스템 확인</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">df</span> <span class=\"token parameter variable\">-h</span>\nFilesystem           Size  Used Avail Use% Mounted on\ndevtmpfs             <span class=\"token number\">4</span>.0M     <span class=\"token number\">0</span>  <span class=\"token number\">4</span>.0M   <span class=\"token number\">0</span>% /dev\ntmpfs                <span class=\"token number\">3</span>.8G     <span class=\"token number\">0</span>  <span class=\"token number\">3</span>.8G   <span class=\"token number\">0</span>% /dev/shm\ntmpfs                <span class=\"token number\">1</span>.5G  <span class=\"token number\">9</span>.4M  <span class=\"token number\">1</span>.5G   <span class=\"token number\">1</span>% /run\n/dev/mapper/rl-root  101G  <span class=\"token number\">6</span>.1G   95G   <span class=\"token number\">7</span>% /  <span class=\"token comment\"># 이거 늘릴 거임</span>\n/dev/sda2            960M  293M  668M  <span class=\"token number\">31</span>% /boot\n/dev/sda1            599M  <span class=\"token number\">7</span>.0M  592M   <span class=\"token number\">2</span>% /boot/efi\ntmpfs                768M  132K  768M   <span class=\"token number\">1</span>% /run/user/1000</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 디스크 및 파티션 세부 정보 확인</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">fdisk</span> <span class=\"token parameter variable\">-l</span> /dev/sda\nGPT PMBR size mismatch <span class=\"token punctuation\">(</span><span class=\"token number\">243269631</span> <span class=\"token operator\">!=</span> <span class=\"token number\">419430399</span><span class=\"token punctuation\">)</span> will be corrected by write.\nDisk /dev/sda: <span class=\"token number\">200</span> GiB, <span class=\"token number\">214748364800</span> bytes, <span class=\"token number\">419430400</span> sectors  <span class=\"token comment\"># /dev/sda 디스크 총 용량이 200GB인데</span>\nDisk model: Virtual disk\nUnits: sectors of <span class=\"token number\">1</span> * <span class=\"token number\">512</span> <span class=\"token operator\">=</span> <span class=\"token number\">512</span> bytes\nSector size <span class=\"token punctuation\">(</span>logical/physical<span class=\"token punctuation\">)</span>: <span class=\"token number\">512</span> bytes / <span class=\"token number\">512</span> bytes\nI/O size <span class=\"token punctuation\">(</span>minimum/optimal<span class=\"token punctuation\">)</span>: <span class=\"token number\">512</span> bytes / <span class=\"token number\">512</span> bytes\nDisklabel type: gpt\nDisk identifier: 8DB6ADB3-2548-4F36-9CC3-0149069BAC35\n\nDevice       Start       End   Sectors   Size Type             <span class=\"token comment\"># sda1 ~ 3 용량 모두 합치면 200GB가 안 됨</span>\n/dev/sda1     <span class=\"token number\">2048</span>   <span class=\"token number\">1230847</span>   <span class=\"token number\">1228800</span>   600M EFI System\n/dev/sda2  <span class=\"token number\">1230848</span>   <span class=\"token number\">3327999</span>   <span class=\"token number\">2097152</span>     1G Linux filesystem\n/dev/sda3  <span class=\"token number\">3328000</span> <span class=\"token number\">243267583</span> <span class=\"token number\">239939584</span> <span class=\"token number\">114</span>.4G Linux LVM        <span class=\"token comment\"># 이거 늘릴 거</span></code></pre></div>\n<p><code class=\"language-text\">dnf install cloud-utils-growpart -y</code> 명령어로 디스크 용량 할당을 간편하게 해주는 growpart 패키지를 설치한 후 <code class=\"language-text\">growpart</code> 명령어로 파티션 용량 확장.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># /dev/sda3 파티션에 사용 가능한 용량 할당</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> growpart /dev/sda <span class=\"token number\">3</span>\nCHANGED: <span class=\"token assign-left variable\">partition</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">start</span><span class=\"token operator\">=</span><span class=\"token number\">3328000</span> old: <span class=\"token assign-left variable\">size</span><span class=\"token operator\">=</span><span class=\"token number\">239939584</span> <span class=\"token assign-left variable\">end</span><span class=\"token operator\">=</span><span class=\"token number\">243267583</span> new: <span class=\"token assign-left variable\">size</span><span class=\"token operator\">=</span><span class=\"token number\">416102367</span> <span class=\"token assign-left variable\">end</span><span class=\"token operator\">=</span><span class=\"token number\">419430366</span>\n\n<span class=\"token comment\"># 정말 할당됐는지 못 믿겠으면 조회</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lsblk\nNAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS\nsda           <span class=\"token number\">8</span>:0    <span class=\"token number\">0</span>   200G  <span class=\"token number\">0</span> disk\n├─sda1        <span class=\"token number\">8</span>:1    <span class=\"token number\">0</span>   600M  <span class=\"token number\">0</span> part /boot/efi\n├─sda2        <span class=\"token number\">8</span>:2    <span class=\"token number\">0</span>     1G  <span class=\"token number\">0</span> part /boot\n└─sda3        <span class=\"token number\">8</span>:3    <span class=\"token number\">0</span> <span class=\"token number\">198</span>.4G  <span class=\"token number\">0</span> part           <span class=\"token comment\"># 114.4G → 198.4G 확장됨</span>\n  ├─rl-root <span class=\"token number\">253</span>:0    <span class=\"token number\">0</span> <span class=\"token number\">100</span>.4G  <span class=\"token number\">0</span> lvm  /\n  └─rl-swap <span class=\"token number\">253</span>:1    <span class=\"token number\">0</span>    14G  <span class=\"token number\">0</span> lvm  <span class=\"token punctuation\">[</span>SWAP<span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">pvresize</code> 명령어로 물리볼륨(PV) 크기 조정 후</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> pvresize /dev/sda3\n  Physical volume <span class=\"token string\">\"/dev/sda3\"</span> changed\n  <span class=\"token number\">1</span> physical volume<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> resized or updated / <span class=\"token number\">0</span> physical volume<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> not resized</code></pre></div>\n<p><code class=\"language-text\">vgdisplay</code> 명령어로 논리볼륨(LV)에 추가로 할당 가능한 용량 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> vgdisplay\n  --- Volume group ---\n  VG Name               rl  <span class=\"token comment\"># Volume Group 이름 확인</span>\n  System ID\n  Format                lvm2\n  Metadata Areas        <span class=\"token number\">1</span>\n  Metadata Sequence No  <span class=\"token number\">5</span>\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                <span class=\"token number\">0</span>\n  Cur LV                <span class=\"token number\">2</span>\n  Open LV               <span class=\"token number\">2</span>\n  Max PV                <span class=\"token number\">0</span>\n  Cur PV                <span class=\"token number\">1</span>\n  Act PV                <span class=\"token number\">1</span>\n  VG Size               <span class=\"token number\">198.41</span> GiB\n  PE Size               <span class=\"token number\">4.00</span> MiB\n  Total PE              <span class=\"token number\">50793</span>\n  Alloc PE / Size       <span class=\"token number\">29288</span> / <span class=\"token operator\">&lt;</span><span class=\"token number\">114.41</span> GiB\n  Free  PE / Size       <span class=\"token number\">21505</span> / <span class=\"token number\">84.00</span> GiB    <span class=\"token comment\"># 84GB 추가 가능</span>\n  VG UUID               CHhQUT-BR0c-Ky4T-Rnjl-9Z6o-OOwP-cpfxKK\n</code></pre></div>\n<p><code class=\"language-text\">lvextend</code> 명령어로 논리볼륨(LV) 용량을 확장한 후</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># rl 볼륨그룹(VG)의 root 논리볼륨(LV) 용량 확장</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lvextend <span class=\"token parameter variable\">-L</span> +84G /dev/mapper/rl-root\n  Size of logical volume rl/root changed from <span class=\"token operator\">&lt;</span><span class=\"token number\">100.41</span> GiB <span class=\"token punctuation\">(</span><span class=\"token number\">25704</span> extents<span class=\"token punctuation\">)</span> to <span class=\"token operator\">&lt;</span><span class=\"token number\">184.41</span> GiB <span class=\"token punctuation\">(</span><span class=\"token number\">47208</span> extents<span class=\"token punctuation\">)</span>.\n  Logical volume rl/root successfully resized.</code></pre></div>\n<p><code class=\"language-text\">xfs_growfs</code> 명령어로 xfs 파일시스템 크기 확장. ext4 파일시스템인 경우 <code class=\"language-text\">resize2fs</code> 명령어 사용.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># rl 볼륨그룹(VG)의 root 논리볼륨(LV)을 사용하는 xfs 파일시스템 크기 확장</span>\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> xfs_growfs /dev/mapper/rl-root\nmeta-data<span class=\"token operator\">=</span>/dev/mapper/rl-root    <span class=\"token assign-left variable\">isize</span><span class=\"token operator\">=</span><span class=\"token number\">512</span>    <span class=\"token assign-left variable\">agcount</span><span class=\"token operator\">=</span><span class=\"token number\">4</span>, <span class=\"token assign-left variable\">agsize</span><span class=\"token operator\">=</span><span class=\"token number\">6580224</span> blks\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">sectsz</span><span class=\"token operator\">=</span><span class=\"token number\">512</span>   <span class=\"token assign-left variable\">attr</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>, <span class=\"token assign-left variable\">projid32bit</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">crc</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>        <span class=\"token assign-left variable\">finobt</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>, <span class=\"token assign-left variable\">sparse</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>, <span class=\"token assign-left variable\">rmapbt</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">reflink</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>    <span class=\"token assign-left variable\">bigtime</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">inobtcount</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">nrext64</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\ndata     <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">bsize</span><span class=\"token operator\">=</span><span class=\"token number\">4096</span>   <span class=\"token assign-left variable\">blocks</span><span class=\"token operator\">=</span><span class=\"token number\">26320896</span>, <span class=\"token assign-left variable\">imaxpct</span><span class=\"token operator\">=</span><span class=\"token number\">25</span>\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">sunit</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>      <span class=\"token assign-left variable\">swidth</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> blks\nnaming   <span class=\"token operator\">=</span>version <span class=\"token number\">2</span>              <span class=\"token assign-left variable\">bsize</span><span class=\"token operator\">=</span><span class=\"token number\">4096</span>   ascii-ci<span class=\"token operator\">=</span><span class=\"token number\">0</span>, <span class=\"token assign-left variable\">ftype</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\nlog      <span class=\"token operator\">=</span>internal log           <span class=\"token assign-left variable\">bsize</span><span class=\"token operator\">=</span><span class=\"token number\">4096</span>   <span class=\"token assign-left variable\">blocks</span><span class=\"token operator\">=</span><span class=\"token number\">16384</span>, <span class=\"token assign-left variable\">version</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>\n         <span class=\"token operator\">=</span>                       <span class=\"token assign-left variable\">sectsz</span><span class=\"token operator\">=</span><span class=\"token number\">512</span>   <span class=\"token assign-left variable\">sunit</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> blks, lazy-count<span class=\"token operator\">=</span><span class=\"token number\">1</span>\nrealtime <span class=\"token operator\">=</span>none                   <span class=\"token assign-left variable\">extsz</span><span class=\"token operator\">=</span><span class=\"token number\">4096</span>   <span class=\"token assign-left variable\">blocks</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>, <span class=\"token assign-left variable\">rtextents</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\ndata blocks changed from <span class=\"token number\">26320896</span> to <span class=\"token number\">48340992</span></code></pre></div>\n<p>최종 확인.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> <span class=\"token function\">df</span> <span class=\"token parameter variable\">-h</span>\nFilesystem           Size  Used Avail Use% Mounted on\ndevtmpfs             <span class=\"token number\">4</span>.0M     <span class=\"token number\">0</span>  <span class=\"token number\">4</span>.0M   <span class=\"token number\">0</span>% /dev\ntmpfs                <span class=\"token number\">3</span>.8G     <span class=\"token number\">0</span>  <span class=\"token number\">3</span>.8G   <span class=\"token number\">0</span>% /dev/shm\ntmpfs                <span class=\"token number\">1</span>.5G  <span class=\"token number\">9</span>.4M  <span class=\"token number\">1</span>.5G   <span class=\"token number\">1</span>% /run\n/dev/mapper/rl-root  185G  <span class=\"token number\">6</span>.7G  178G   <span class=\"token number\">4</span>% /  <span class=\"token comment\"># 잘 늘어났음</span>\n/dev/sda2            960M  293M  668M  <span class=\"token number\">31</span>% /boot\n/dev/sda1            599M  <span class=\"token number\">7</span>.0M  592M   <span class=\"token number\">2</span>% /boot/efi\ntmpfs                768M  132K  768M   <span class=\"token number\">1</span>% /run/user/1000\n\n<span class=\"token punctuation\">[</span>root@hostname ~<span class=\"token punctuation\">]</span> lsblk\nNAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS\nsda           <span class=\"token number\">8</span>:0    <span class=\"token number\">0</span>   200G  <span class=\"token number\">0</span> disk\n├─sda1        <span class=\"token number\">8</span>:1    <span class=\"token number\">0</span>   600M  <span class=\"token number\">0</span> part /boot/efi\n├─sda2        <span class=\"token number\">8</span>:2    <span class=\"token number\">0</span>     1G  <span class=\"token number\">0</span> part /boot\n└─sda3        <span class=\"token number\">8</span>:3    <span class=\"token number\">0</span> <span class=\"token number\">198</span>.4G  <span class=\"token number\">0</span> part\n  ├─rl-root <span class=\"token number\">253</span>:0    <span class=\"token number\">0</span> <span class=\"token number\">184</span>.4G  <span class=\"token number\">0</span> lvm  /  <span class=\"token comment\"># 잘 늘어남</span>\n  └─rl-swap <span class=\"token number\">253</span>:1    <span class=\"token number\">0</span>    14G  <span class=\"token number\">0</span> lvm  <span class=\"token punctuation\">[</span>SWAP<span class=\"token punctuation\">]</span></code></pre></div>","tableOfContents":"<ul>\n<li><a href=\"#-%EC%9A%A9%EC%96%B4-%EC%84%A4%EB%AA%85\">🔠 용어 설명</a></li>\n<li><a href=\"#-%EB%94%94%EC%8A%A4%ED%81%AC-%ED%8C%8C%ED%8B%B0%EC%85%98-%EB%B0%8F-%EB%B3%BC%EB%A5%A8-%EC%A0%95%EB%B3%B4-%EC%A1%B0%ED%9A%8C\">👀 디스크, 파티션 및 볼륨 정보 조회</a></li>\n<li><a href=\"#%EF%B8%8F-%EB%94%94%EC%8A%A4%ED%81%AC-%EC%B6%94%EA%B0%80-%ED%9B%84-%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%A7%88%EC%9A%B4%ED%8A%B8-%ED%95%B4%EB%B3%B4%EA%B8%B0\">🛠️ 디스크 추가 후 파일시스템 마운트 해보기</a></li>\n<li><a href=\"#-%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9A%A9%EB%9F%89-%ED%99%95%EC%9E%A5\">🔍 파일시스템 용량 확장</a></li>\n</ul>","frontmatter":{"title":"Rocky Linux 9 파일시스템 설정","description":"Rocky Linux 9 파일시스템 설정","date":"September 14, 2024","tags":["system","linux"],"series":"시스템 관리","previewImage":"system.jpg","isPrivate":null}},"previous":{"fields":{"slug":"/web/nextjs/nextjs-summary/"},"frontmatter":{"title":"Next.js 간단 정리","isPrivate":null}},"next":null},"pageContext":{"id":"82f9ea94-66b1-5953-a62f-f51860f0d81b","previousPostId":"90c6681a-b773-5e5a-a67f-98e86a3714b7","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}