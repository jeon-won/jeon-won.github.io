{"componentChunkName":"component---src-templates-post-jsx","path":"/coin/pine-script-summary/","result":{"data":{"site":{"siteMetadata":{"title":"jeonwon.dev","author":"Jeon Won"}},"markdownRemark":{"id":"10e929a1-5ad1-5476-9cb4-019a012ae5c8","excerpt":"아래 사이트 보고 배운 파인 스크립트 정리 글(정리 중...) https://wikidocs.net/book/8535 https://wikidocs.net/book/938…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2192d41ac8d70e299e651f6e6360ff0b/2a704/pine-script.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.079754601226995%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRn4AAABXRUJQVlA4IHIAAACQAwCdASoUAAoAPtFUpEuoJKOhsAgBABoJQBfJBFFQYeufINAAAP71Hj40va7U+dNNKAxhsDs6x3aygsxVdI1ixmwk1BAqJ8jbPALvEEbMVAGgLM5qZMmZjj9iYE2KzN3z8vU4xdzZD3jyAS34Cg/9AAA='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pine script\"\n        title=\"\"\n        src=\"/static/2192d41ac8d70e299e651f6e6360ff0b/c1dc5/pine-script.webp\"\n        srcset=\"/static/2192d41ac8d70e299e651f6e6360ff0b/94563/pine-script.webp 163w,\n/static/2192d41ac8d70e299e651f6e6360ff0b/647a8/pine-script.webp 325w,\n/static/2192d41ac8d70e299e651f6e6360ff0b/c1dc5/pine-script.webp 650w,\n/static/2192d41ac8d70e299e651f6e6360ff0b/1e975/pine-script.webp 975w,\n/static/2192d41ac8d70e299e651f6e6360ff0b/063bf/pine-script.webp 1300w,\n/static/2192d41ac8d70e299e651f6e6360ff0b/2a704/pine-script.webp 1811w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>아래 사이트 보고 배운 파인 스크립트 정리 글(정리 중...)</p>\n<ul>\n<li><a href=\"https://wikidocs.net/book/8535\">https://wikidocs.net/book/8535</a></li>\n<li><a href=\"https://wikidocs.net/book/9388\">https://wikidocs.net/book/9388</a></li>\n</ul>\n<h2 id=\"-목차\" style=\"position:relative;\"><a href=\"#-%EB%AA%A9%EC%B0%A8\" aria-label=\" 목차 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔖 목차</h2>\n<ul>\n<li><a href=\"#-%EB%AA%A9%EC%B0%A8\">🔖 목차</a></li>\n<li><a href=\"#-%ED%8C%8C%EC%9D%B8-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%9E%80\">🤔 파인 스크립트란?</a></li>\n<li><a href=\"#-%EB%B3%80%EC%88%98\">🥡 변수</a>\n<ul>\n<li><a href=\"#%EA%B8%B0%EB%B3%B8-%EB%B3%80%EC%88%98\">기본 변수</a></li>\n<li><a href=\"#%EB%82%B4%EC%9E%A5-%EB%B3%80%EC%88%98\">내장 변수</a></li>\n<li><a href=\"#%EB%82%A0%EC%A7%9C%EC%99%80-%EC%8B%9C%EA%B0%84\">날짜와 시간</a></li>\n<li><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4\">네임스페이스</a></li>\n</ul>\n</li>\n<li><a href=\"#-%EC%9E%90%EB%A3%8C-%EA%B5%AC%EC%A1%B0\">📊 자료 구조</a>\n<ul>\n<li><a href=\"#%EC%8B%9C%EB%A6%AC%EC%A6%88series\">시리즈(Series)</a></li>\n<li><a href=\"#%EB%B0%B0%EC%97%B4array\">배열(Array)</a></li>\n</ul>\n</li>\n<li><a href=\"#-%EC%A1%B0%EA%B1%B4%EB%AC%B8\">❓ 조건문</a></li>\n<li><a href=\"#-%EB%B0%98%EB%B3%B5%EB%AC%B8\">🔁 반복문</a></li>\n<li><a href=\"#-%ED%95%A8%EC%88%98\">🏹 함수</a>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%EB%82%B4%EC%9E%A5-%ED%95%A8%EC%88%98\">주요 내장 함수</a></li>\n</ul>\n</li>\n<li><a href=\"#-%EC%A0%84%EB%9E%B5\">🎯 전략</a></li>\n</ul>\n<h2 id=\"-파인-스크립트란\" style=\"position:relative;\"><a href=\"#-%ED%8C%8C%EC%9D%B8-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%9E%80\" aria-label=\" 파인 스크립트란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 파인 스크립트란?</h2>\n<p>파인 스크립트(Pine Script)는 트레이딩뷰에 사이트나 앱 내에서 사용하는 프로그래밍 언어. 주식, 코인 차트 등에 사용하는 지표나 전략을 개발하기 위해 사용함.</p>\n<p>또한 여러 가지 보조지표 조건에 부합하는 알림 등을 설정하려면 파인 스크립트를 사용해야 함. 예를 들어 RSI 과매도인 경우와 거래량이 평균 대비 터진 경우 전자와 후자 각각에 대해 알림을 설정할 순 있지만, 두 조건 모두 만족할 때 알림을 보내도록 설정할 수 없음. 이 때 파인 스크립트를 사용해야 함.</p>\n<p>파인 스크립트는 차트의 각 바(타임 프레임에서 한 개의 데이터. 막대 또는 캔들이라고 불러도 될 듯)마다 실행됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"My script\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">hline</span><span class=\"token punctuation\">(</span><span class=\"token number\">50000</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 50000 값으로 가로선 그리기</span></code></pre></div>\n<h2 id=\"-변수\" style=\"position:relative;\"><a href=\"#-%EB%B3%80%EC%88%98\" aria-label=\" 변수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🥡 변수</h2>\n<h3 id=\"기본-변수\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%EB%B3%80%EC%88%98\" aria-label=\"기본 변수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 변수</h3>\n<p>파인 스크립트의 기본 데이터 타입은 정수, 실수, 문자열임.</p>\n<ul>\n<li>정수(int): -3, -2, -1, 0, 1, 2, 3, ...</li>\n<li>실수(float): 0.02, 0.03, 3.14, ...</li>\n<li>문자열(string): 'pine', \"script\", ...</li>\n</ul>\n<p>변수 선언 시 변수명 앞에 데이터 타입을 명시하지 않고 그냥 선언하면 됨. var나 varip 키워드를 사용할 수 있는데 차이점은 다음과 같음. <strong>(사실 뭔 차인지 잘 이해가 안 됨 😵‍💫)</strong></p>\n<ul>\n<li>키워드 미사용: 변수가 각 바에서 초기화되고, 이전 바의 값이 유지되지 않음</li>\n<li>var: 첫번째 바에서만 초기화되고, 그 후 각 바에서 변수의 값은 이전 바의 값에 따라 업데이트됨</li>\n<li>varip: var와 유사하지만, 변수는 이전 바의 값과 함께 초기화됨. 이를 통해 이전 바에서의 값이 계산에 사용됨.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">num1 <span class=\"token operator\">=</span> <span class=\"token number\">1</span></code></pre></div>\n<p>이미 선언된 변수 값을 변경하려면 <code class=\"language-text\">:=</code> 기호를 사용해야 함.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">num1 <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token literal-property property\">num1</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> <span class=\"token number\">2</span></code></pre></div>\n<p>사칙연산은 일반 프로그래밍 언어와 비슷함.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"비트코인 원화 기준 가격\"</span><span class=\"token punctuation\">)</span>\n\nbtc_usdt <span class=\"token operator\">=</span> <span class=\"token number\">50000</span>\nusd_krw <span class=\"token operator\">=</span> <span class=\"token number\">1350</span>\nbtc_krw <span class=\"token operator\">=</span> btc_usdt <span class=\"token operator\">*</span> usd_krw <span class=\"token comment\">// 사칙연산(+, -, *, /) 가능</span>\n<span class=\"token function\">hline</span><span class=\"token punctuation\">(</span>total<span class=\"token punctuation\">)</span></code></pre></div>\n<p>파인 스크립트에서 차트에 문자열을 출력하려면 <code class=\"language-text\">plotshape()</code> 함수를 사용하여 차트에 출력하거나</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"문자열 차트에 출력하기\"</span><span class=\"token punctuation\">)</span>\n\nlang_a <span class=\"token operator\">=</span> <span class=\"token string\">\"Pine\"</span>\nlang_b <span class=\"token operator\">=</span> <span class=\"token string\">\"Script\"</span>\nlang <span class=\"token operator\">=</span> lang_a <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span> <span class=\"token operator\">+</span> lang_b <span class=\"token comment\">// 문자열 결합도 + 연산자 사용</span>\n<span class=\"token function\">plotshape</span><span class=\"token punctuation\">(</span>barstate<span class=\"token punctuation\">.</span>islast<span class=\"token punctuation\">,</span> text<span class=\"token operator\">=</span>lang<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 현재 바의 마지막인지에 대한 데이터</span></code></pre></div>\n<p>log 네임스페이스의 info, warning, error 함수를 사용하여 파인 로그 화면에 출력하면 됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"로그 출력하기\"</span><span class=\"token punctuation\">)</span>\n\ntext <span class=\"token operator\">=</span> <span class=\"token string\">\"Pine Script\"</span>\nlog<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{0}\"</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"내장-변수\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EC%9E%A5-%EB%B3%80%EC%88%98\" aria-label=\"내장 변수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>내장 변수</h3>\n<p>내장 변수는 파인 스크립트가 기본적으로 제공하는 변수.</p>\n<ul>\n<li>open: 현재 바의 시가</li>\n<li>high: 현재 바의 고가</li>\n<li>low: 현재 바의 저가</li>\n<li>close: 현재 바의 종가</li>\n<li>volume: 현재 바의 거래량</li>\n</ul>\n<p>bar_index 내장 변수는 차트의 각 캔들에 대한 인덱스임. 첫 번째 캔들의 bar_index 값은 0이고 각 캔들마다 값이 1씩 증가함. 가장 최근 캔들의 bar_index 값은 최대값임.</p>\n<h3 id=\"날짜와-시간\" style=\"position:relative;\"><a href=\"#%EB%82%A0%EC%A7%9C%EC%99%80-%EC%8B%9C%EA%B0%84\" aria-label=\"날짜와 시간 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>날짜와 시간</h3>\n<p>날짜와 시간을 사용하려면 timestamp를 사용하면 됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"My script\"</span><span class=\"token punctuation\">)</span>\n\ncurrent_time <span class=\"token operator\">=</span> <span class=\"token function\">timestamp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"UTC+9\"</span><span class=\"token punctuation\">,</span> year<span class=\"token punctuation\">,</span> month<span class=\"token punctuation\">,</span> dayofmonth<span class=\"token punctuation\">,</span> hour<span class=\"token punctuation\">,</span> minute<span class=\"token punctuation\">,</span> second<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 현재 시간</span>\nstart_time <span class=\"token operator\">=</span> <span class=\"token function\">timestamp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"UTC+9\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2024</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\nend_time <span class=\"token operator\">=</span> <span class=\"token function\">timestamp</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"UTC+9\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2024</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\ntime_window <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>time <span class=\"token operator\">>=</span> start_time and time <span class=\"token operator\">&lt;</span> end_time<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>time_window<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"네임스페이스\" style=\"position:relative;\"><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4\" aria-label=\"네임스페이스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네임스페이스</h3>\n<p>네임스페이스는 비슷한 성격의 변수나 함수를 모아놓은 것.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">color<span class=\"token punctuation\">.</span>red         <span class=\"token comment\">// color 네임스페이스의 red 변수</span>\nta<span class=\"token punctuation\">.</span><span class=\"token function\">rsi</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ta 네임스페이스의 rsi 함수</span></code></pre></div>\n<p>주요 네임스페이스는 다음과 같음.</p>\n<ul>\n<li>color: red, green, blue 등</li>\n<li>currency: KRW, JPY, USD 등</li>\n<li>ta: sma(), rsi(), macd() 등</li>\n<li>math: abs(), log(), max() 등</li>\n</ul>\n<h2 id=\"-자료-구조\" style=\"position:relative;\"><a href=\"#-%EC%9E%90%EB%A3%8C-%EA%B5%AC%EC%A1%B0\" aria-label=\" 자료 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📊 자료 구조</h2>\n<h3 id=\"시리즈series\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EB%A6%AC%EC%A6%88series\" aria-label=\"시리즈series permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시리즈(Series)</h3>\n<p>Series는 비슷한 성격의 여러 데이터(타임 프레임)을 모아놓은 자료구조. open, high, low, close, volume 등과 같은 내장 변수가 Series 타입임.</p>\n<p>Series 간 사칙연산이 가능하며, 사칙연산 시 모든 타임 프레임 값이 계산됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"캔들 몸통 크기 계산하기\"</span><span class=\"token punctuation\">)</span>\n\ncandle_body <span class=\"token operator\">=</span> math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>open<span class=\"token operator\">-</span>close<span class=\"token punctuation\">)</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>candle_body<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Series의 특정 위치 값을 찾으려면 인덱스를 사용하면 됨. 예를 들어 <code class=\"language-text\">close[0]</code>은 현재 종가, <code class=\"language-text\">close[1]</code>은 현재 바로 직전의 종가임.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3일 이동평균선\"</span><span class=\"token punctuation\">)</span>\n\nmy_ma3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>close<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>close<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">3</span> <span class=\"token comment\">// ta.sma(close, 3)와 같음</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>my_ma3<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"배열array\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EC%97%B4array\" aria-label=\"배열array permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배열(Array)</h3>\n<p>배열은 동일한 타입의 여러 데이터를 저장할 수 있는 자료구조.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"배열 실습\"</span><span class=\"token punctuation\">)</span>\n\na <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">new_int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 크기가 3인 int 타입 배열  생성</span>\narray<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>    <span class=\"token comment\">// 배열 a의 0번째 인덱스에 1 저장</span>\narray<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>    <span class=\"token comment\">// 배열 a의 1번째 인덱스에 2 저장</span>\nval <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 배열 a의 0번째 인덱스 값 꺼내오기</span></code></pre></div>\n<p>Array 관련 함수는 다음과 같음.</p>\n<ul>\n<li>array.push(name, value): array의 마지막에 값 추가</li>\n<li>array.pop(name): array의 마지막 부분의 원소 제거</li>\n<li>array.unshift(name, value): array의 시작에 값 추가</li>\n<li>array.shift(name): array의 시작 부분의 원소 제거</li>\n<li>array.insert(name, index, value): array의 특정 위치에 값 추가</li>\n<li>array.remove(name, index): array의 특정 위치의 원소 제거</li>\n<li>array.clear(name): array의 모든 원소 제거</li>\n</ul>\n<h2 id=\"-조건문\" style=\"position:relative;\"><a href=\"#-%EC%A1%B0%EA%B1%B4%EB%AC%B8\" aria-label=\" 조건문 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>❓ 조건문</h2>\n<p>조건문은 <code class=\"language-text\">if, else if, else</code> 키워드를 사용함.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"조건문 실습\"</span><span class=\"token punctuation\">)</span>\n\nmy_color <span class=\"token operator\">=</span> <span class=\"token function\">color</span><span class=\"token punctuation\">(</span>na<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> close <span class=\"token operator\">&lt;</span> <span class=\"token number\">50000</span>\n    <span class=\"token literal-property property\">my_color</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span>red\n<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> color <span class=\"token operator\">&lt;</span> <span class=\"token number\">51000</span>\n    <span class=\"token literal-property property\">my_color</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span>green\n<span class=\"token keyword\">else</span>\n    <span class=\"token literal-property property\">my_color</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span>blue\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>my_color<span class=\"token punctuation\">)</span></code></pre></div>\n<p>삼항 연산자는 if ~ else 조건문을 한 줄로 작성할 때 사용함. <code class=\"language-text\">조건문 ? 조건이 참일 때 실행할 코드 : 조건이 거짓일 때 실행할 코드</code> 형태로 사용하면 됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"삼항 연산자 실습\"</span><span class=\"token punctuation\">)</span>\nmy_color <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>close <span class=\"token operator\">></span> <span class=\"token number\">50000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> color<span class=\"token punctuation\">.</span>green <span class=\"token operator\">:</span> color<span class=\"token punctuation\">.</span>red\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>my_color<span class=\"token punctuation\">)</span></code></pre></div>\n<p>논리 연산자는 여러 조건들을 묶을 때 사용함. <code class=\"language-text\">and</code>, <code class=\"language-text\">or</code> 또는 <code class=\"language-text\">not</code>을 사용함</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"도지 캔들 판별\"</span><span class=\"token punctuation\">)</span>\n\ndogi_up <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>open <span class=\"token operator\">></span> close<span class=\"token punctuation\">)</span> <span class=\"token function\">and</span> <span class=\"token punctuation\">(</span>open <span class=\"token operator\">&lt;</span> close <span class=\"token operator\">*</span> <span class=\"token number\">1.005</span><span class=\"token punctuation\">)</span>\ndogi_down <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>open <span class=\"token operator\">&lt;</span> close<span class=\"token punctuation\">)</span> <span class=\"token function\">and</span> <span class=\"token punctuation\">(</span>open <span class=\"token operator\">></span> close <span class=\"token operator\">*</span> <span class=\"token number\">1.005</span><span class=\"token punctuation\">)</span>\ndogi <span class=\"token operator\">=</span> dogi_up or dogi_down\n<span class=\"token function\">plotshape</span><span class=\"token punctuation\">(</span>dogi<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>color<span class=\"token punctuation\">.</span>blue<span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span>shape<span class=\"token punctuation\">.</span>circle<span class=\"token punctuation\">,</span> location <span class=\"token operator\">=</span> location<span class=\"token punctuation\">.</span>abovebar<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"인걸핑 패턴 판별\"</span><span class=\"token punctuation\">,</span> overlay <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 베어리시 인걸핑(현재 음봉의 몸통이 직전 양봉의 몸통보다 큰 패턴)</span>\nbear_engulfing1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> open<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token function\">and</span> <span class=\"token punctuation\">(</span>close <span class=\"token operator\">&lt;</span> open<span class=\"token punctuation\">)</span>\nbear_engulfing2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>open <span class=\"token operator\">></span> close<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token function\">and</span> <span class=\"token punctuation\">(</span>close <span class=\"token operator\">&lt;</span> open<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nbear_engulfing <span class=\"token operator\">=</span> bear_engulfing1 and bear_engulfing2\n<span class=\"token function\">plotshape</span><span class=\"token punctuation\">(</span>bear_engulfing<span class=\"token punctuation\">,</span> text<span class=\"token operator\">=</span><span class=\"token string\">\"bear engulfing\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 불리시 인걸핑(현재 양봉의 몸통이 직전 음봉의 몸통보다 큰 패턴)</span>\nbullish1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> open<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token function\">and</span> <span class=\"token punctuation\">(</span>close <span class=\"token operator\">></span> open<span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 전봉 음봉, 현재봉 양봉</span>\nbullish2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>open <span class=\"token operator\">&lt;</span> close<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token function\">and</span> <span class=\"token punctuation\">(</span>close <span class=\"token operator\">></span> open<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 몸통 비교</span>\nbullish_engulfing <span class=\"token operator\">=</span> bullish1 and bullish2\n\n<span class=\"token function\">plotshape</span><span class=\"token punctuation\">(</span>bullish_engulfing<span class=\"token punctuation\">,</span> text<span class=\"token operator\">=</span><span class=\"token string\">\"bullish engulfing\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"-반복문\" style=\"position:relative;\"><a href=\"#-%EB%B0%98%EB%B3%B5%EB%AC%B8\" aria-label=\" 반복문 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔁 반복문</h2>\n<p>파인 스크립트도 다른 프로그래밍 언어와 똑같이 for 또는 while 키워드로 반복문을 사용함. 하지만 반복문을 사용할 일이 많지 않음. Series 자료구조를 사용하면 각 캔들 데이터에 대한 반복 처리를 알아서 해주기 때문.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"반복문\"</span><span class=\"token punctuation\">)</span>\n\ndiff <span class=\"token operator\">=</span> high <span class=\"token operator\">-</span> low <span class=\"token comment\">// 각 시간대별 캔들 데이터 처리를 알아서 반복 처리해줌</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>diff<span class=\"token punctuation\">)</span></code></pre></div>\n<p>for 문은 <code class=\"language-text\">for offset=시작인덱스 to 끝인덱스</code>로 사용함</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3일 이동평균선을 for 문으로 만들어보기\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token constant\">PERIOD</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\nsum_close <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span>\n\n<span class=\"token keyword\">for</span> offset<span class=\"token operator\">=</span><span class=\"token number\">0</span> to <span class=\"token constant\">PERIOD</span><span class=\"token operator\">-</span><span class=\"token number\">1</span>\n    <span class=\"token literal-property property\">sum_close</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> sum_close <span class=\"token operator\">+</span> close<span class=\"token punctuation\">[</span>offset<span class=\"token punctuation\">]</span>\n\nmy_ma3 <span class=\"token operator\">=</span> sum_close <span class=\"token operator\">/</span> <span class=\"token constant\">PERIOD</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>my_ma3<span class=\"token punctuation\">)</span></code></pre></div>\n<p>while 문은 while 키워드 뒤에 반복 실행할 조건을 명시해주면 됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3일 이동평균선을 while 문으로 만들어보기\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token constant\">PERIOD</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\nsum_close <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span>\noffset <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token keyword\">while</span> offset <span class=\"token operator\">&lt;</span> <span class=\"token constant\">PERIOD</span>\n    <span class=\"token literal-property property\">sum_close</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> sum_close <span class=\"token operator\">+</span> close<span class=\"token punctuation\">[</span>offset<span class=\"token punctuation\">]</span>\n    <span class=\"token literal-property property\">offset</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> offset <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n\nmy_ma3 <span class=\"token operator\">=</span> sum_close <span class=\"token operator\">/</span> <span class=\"token constant\">PERIOD</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>my_ma3<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"-함수\" style=\"position:relative;\"><a href=\"#-%ED%95%A8%EC%88%98\" aria-label=\" 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🏹 함수</h2>\n<p>함수를 호출하는 건 다른 프로그래밍 언어와 큰 차이가 없음. 함수를 사용할 때 Ctrl + Space 키를 누르면 도움말을 볼 수 있음.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"함수 호출\"</span><span class=\"token punctuation\">)</span>\n\nrsi <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">rsi</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>rsi<span class=\"token punctuation\">)</span></code></pre></div>\n<p>함수 만드는 건 자바스크립트의 화살표 함수 만들듯이 하면 되는 듯.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"매개변수 받지 않는 함수 만들기\"</span><span class=\"token punctuation\">,</span> overlay <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">sma3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    temp <span class=\"token operator\">=</span> close<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> close<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> close<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    temp <span class=\"token operator\">/</span> <span class=\"token number\">3</span>\n\nmy_sma3 <span class=\"token operator\">=</span> <span class=\"token function\">sma3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>my_sma3<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"매개변수 받는 함수 만들기\"</span><span class=\"token punctuation\">,</span> overlay <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">sma3</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    temp <span class=\"token operator\">=</span> a <span class=\"token operator\">+</span> b <span class=\"token operator\">+</span> c\n    temp <span class=\"token operator\">/</span> <span class=\"token number\">3</span>\n\nmy_sma3 <span class=\"token operator\">=</span> <span class=\"token function\">sma3</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">hline</span><span class=\"token punctuation\">(</span>my_sma3<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"주요-내장-함수\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EB%82%B4%EC%9E%A5-%ED%95%A8%EC%88%98\" aria-label=\"주요 내장 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 내장 함수</h3>\n<p><code class=\"language-text\">hline()</code> 함수는 고정된 가격을 사용하여 가로선을 그림.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">hline</span><span class=\"token punctuation\">(</span>price<span class=\"token operator\">=</span><span class=\"token number\">52000</span><span class=\"token punctuation\">,</span> title<span class=\"token operator\">=</span><span class=\"token string\">\"가로선임\"</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>color<span class=\"token punctuation\">.</span>blue<span class=\"token punctuation\">,</span> linestyle<span class=\"token operator\">=</span>hline<span class=\"token punctuation\">.</span>style_solid<span class=\"token punctuation\">,</span> linewidth<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">fill()</code> 함수는 두 개의 hline이나 plot 사이를 색으로 채우는 함수.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RSI 30~70 사이 색칠하기\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// RSI 그래프</span>\nrsi <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">rsi</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>rsi<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// RSI 과매도, 과매수 표시</span>\nh1 <span class=\"token operator\">=</span> <span class=\"token function\">hline</span><span class=\"token punctuation\">(</span><span class=\"token number\">70</span><span class=\"token punctuation\">)</span>\nh2 <span class=\"token operator\">=</span> <span class=\"token function\">hline</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">fill</span><span class=\"token punctuation\">(</span>h1<span class=\"token punctuation\">,</span> h2<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>color<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span>gray<span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 투명도 90</span></code></pre></div>\n<p><code class=\"language-text\">plot()</code> 함수는 Series 데이터를 차트로 그리는 함수.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>series<span class=\"token operator\">=</span>차트로_그릴_데이터<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>색상<span class=\"token punctuation\">,</span> linewidth<span class=\"token operator\">=</span>라인_너비<span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span>플롯_스타일<span class=\"token punctuation\">,</span> offset<span class=\"token operator\">=</span>플롯을_왼쪽_또는_오른쪽으로_지정된_수_만큼_이동_후_그릴_때_사용<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">plotshape()</code> 함수는 Series bool 타입의 데이터를 차트에 표시하는 함수. 간단한 문자열을 표시할 때도 사용함.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">data <span class=\"token operator\">=</span> close <span class=\"token operator\">>=</span> open\n<span class=\"token function\">plotshape</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span>shape<span class=\"token punctuation\">.</span>xcross<span class=\"token punctuation\">)</span>             <span class=\"token comment\">// 양봉에 X 표시</span>\n<span class=\"token function\">plotshape</span><span class=\"token punctuation\">(</span>barstate<span class=\"token punctuation\">.</span>islast<span class=\"token punctuation\">,</span> text<span class=\"token operator\">=</span><span class=\"token string\">\"Hello World!\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 맨 마지막 봉에 Hello World! 표시</span></code></pre></div>\n<p><code class=\"language-text\">plotchar()</code> 함수는 한 글자의 문자를 표시하는 함수.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">data <span class=\"token operator\">=</span> close <span class=\"token operator\">>=</span> open\n<span class=\"token function\">plotchar</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> char<span class=\"token operator\">=</span><span class=\"token string\">\"U\"</span><span class=\"token punctuation\">,</span> location<span class=\"token operator\">=</span>location<span class=\"token punctuation\">.</span>abovebar<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">ta.crossover(ma1, ma2)</code> 함수는 ma1 이동평균선이 ma2 이동평균선을 상향 돌파 시 true를 반환하는 함수. ta.crossunder(ma1, ma2)` 함수는 이와 반대로 하향 돌파 시 true를 반환하는 함수.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"My script\"</span><span class=\"token punctuation\">,</span> overlay <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\nsma5 <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">sma</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\nsma20 <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">sma</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>sma5<span class=\"token punctuation\">,</span> color <span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">)</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>sma20<span class=\"token punctuation\">,</span> color <span class=\"token operator\">=</span> color<span class=\"token punctuation\">.</span>blue<span class=\"token punctuation\">)</span>\n\ncrossover <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">crossover</span><span class=\"token punctuation\">(</span>sma5<span class=\"token punctuation\">,</span> sma20<span class=\"token punctuation\">)</span>\ncrossunder <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">crossunder</span><span class=\"token punctuation\">(</span>sma5<span class=\"token punctuation\">,</span> sma20<span class=\"token punctuation\">)</span>\n<span class=\"token function\">plotshape</span><span class=\"token punctuation\">(</span>crossover<span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span>shape<span class=\"token punctuation\">.</span>circle<span class=\"token punctuation\">,</span> location<span class=\"token operator\">=</span>location<span class=\"token punctuation\">.</span>abovebar<span class=\"token punctuation\">)</span>\n<span class=\"token function\">plotshape</span><span class=\"token punctuation\">(</span>crossunder<span class=\"token punctuation\">,</span> style<span class=\"token operator\">=</span>shape<span class=\"token punctuation\">.</span>circle<span class=\"token punctuation\">,</span> location<span class=\"token operator\">=</span>location<span class=\"token punctuation\">.</span>abovebar<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">request.security()</code> 함수는 다른 타임프레임의 데이터에 접근하는 함수.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">request<span class=\"token punctuation\">.</span><span class=\"token function\">security</span><span class=\"token punctuation\">(</span>symbol<span class=\"token punctuation\">,</span> timeframe<span class=\"token punctuation\">,</span> expression<span class=\"token punctuation\">,</span> gaps<span class=\"token punctuation\">,</span> lookahead<span class=\"token punctuation\">,</span> ignore_invalid_symbol<span class=\"token punctuation\">,</span> currency<span class=\"token punctuation\">)</span> → series <span class=\"token operator\">&lt;</span>type<span class=\"token operator\">></span></code></pre></div>\n<blockquote>\n<ul>\n<li><strong>symbol:</strong> 데이터를 요청할 자산의 심볼 또는 티커입니다 (예: \"AAPL\"). 차트의 심볼에서 데이터를 요청하려면 syminfo.tickerid를 사용하십시오.</li>\n<li><strong>timeframe:</strong> 데이터를 요청할 타임프레임입니다 (예: \"D\"는 일일, \"W\"는 주간, \"240\"은 4시간 등). 차트의 타임프레임을 사용하려면 빈 문자열이나 timeframe.period 변수를 사용하세요.</li>\n<li><strong>expression:</strong> 요청된 데이터를 사용하여 수행할 표현식 또는 계산입니다 (예: close, ta.sma(close, 50) 등).</li>\n<li><strong>gaps:</strong> 반환된 값이 차트 막대에서 병합되는 방식을 지정합니다. barmerge.gaps_on을 사용하면 함수의 컨텍스트에서 처음 사용할 수 있을 때만 현재 차트 표시줄에 값이 나타납니다. 그렇지 않으면 na가 반환됩니다>(따라서 \"갭\"이 발생함). 디폴트 값인 barmerge.gaps_off를 사용하면 na 값을 피하면서, 반환된 최신 알려진 값으로 간격이 채워집니다.</li>\n<li><strong>lookahead:</strong> barmerge.lookahead_on으로 설정을 하면 히스토리 바에서만 타임프레임 내부 데이터를 리턴합니다. 파인 스크립트 버전 3 부터 디폴트는 barmerge.lookahead_off 입니다.</li>\n<li><strong>ignore_invalid_symbol:</strong> 지정된 심볼을 찾을 수 없는 경우 함수의 동작을 결정합니다.</li>\n<li><strong>currency:</strong> 통화 단위 (open, high, low, close 등)입니다.</li>\n</ul>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"비트코인 원화 가격 계산\"</span><span class=\"token punctuation\">,</span> overlay<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\nbinance_btc <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">security</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BINANCE:BTCUSDT\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> close<span class=\"token punctuation\">)</span>\nusd_krw <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">security</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FX_IDC:USDKRW\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> close<span class=\"token punctuation\">)</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>binance_btc <span class=\"token operator\">*</span> usd_krw<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">input()</code> 함수는 값을 입력받을 때 사용. 예를 들어 이동평균 계산에 사용하는 데이터의 길이를 변경할 때 input 함수를 사용함.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"My script\"</span><span class=\"token punctuation\">,</span> overlay <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\ndata_len <span class=\"token operator\">=</span> <span class=\"token function\">input</span><span class=\"token punctuation\">(</span>defval<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> title<span class=\"token operator\">=</span><span class=\"token string\">\"데이터 길이\"</span><span class=\"token punctuation\">)</span>        <span class=\"token comment\">// title 값은 지표 설정 메뉴에 나타나는 제목임</span>\n<span class=\"token comment\">// data_len = input.int(defval=20, title=\"데이터 길이\") // 사실 input.int() 함수를 사용하는 것인 듯</span>\nsma <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">sma</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> length<span class=\"token operator\">=</span>data_len<span class=\"token punctuation\">)</span>                 <span class=\"token comment\">// input 함수로 입력받은 값을 매개변수로 전달</span>\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>sma<span class=\"token punctuation\">)</span></code></pre></div>\n<p>문자열을 입력받으려면 <code class=\"language-text\">input.string()</code> 함수를 사용해야 함.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"My script\"</span><span class=\"token punctuation\">)</span>\n\ntype <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>defval<span class=\"token operator\">=</span><span class=\"token string\">\"SMA\"</span><span class=\"token punctuation\">,</span> title<span class=\"token operator\">=</span><span class=\"token string\">\"Type\"</span><span class=\"token punctuation\">,</span> options<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'SMA'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EMA'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nma <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span>\n<span class=\"token keyword\">if</span> type <span class=\"token operator\">==</span> <span class=\"token string\">\"SMA\"</span>\n    <span class=\"token literal-property property\">ma</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">sma</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">else</span>\n    <span class=\"token literal-property property\">ma</span> <span class=\"token operator\">:</span><span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">ema</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">)</span></code></pre></div>\n<p>테이블에 문자열 출력은 다음과 같이...</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">indicator</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"My script\"</span><span class=\"token punctuation\">,</span> overlay <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">txt</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> \n    <span class=\"token keyword\">var</span> table table_id <span class=\"token operator\">=</span> table<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>top_right<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1행 1열의 테이블 생성</span>\n    table<span class=\"token punctuation\">.</span><span class=\"token function\">cell</span><span class=\"token punctuation\">(</span>table_id<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> txt<span class=\"token punctuation\">,</span> bgcolor<span class=\"token operator\">=</span>color<span class=\"token punctuation\">.</span>yellow<span class=\"token punctuation\">)</span>    <span class=\"token comment\">// 테이블 행열 인덱스는 0부터 시작함</span>\n\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>syminfo<span class=\"token punctuation\">.</span>tickerid<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"-전략\" style=\"position:relative;\"><a href=\"#-%EC%A0%84%EB%9E%B5\" aria-label=\" 전략 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎯 전략</h2>\n<p>전략을 사용하면 파인 스크립트로 만든 자동매매 전략을 테스트해볼 수 있음.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@version=5</span>\n<span class=\"token function\">strategy</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"정배열, 역배열 자동매매 전략\"</span><span class=\"token punctuation\">,</span> overlay <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\nsma5 <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">sma</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\nsma20 <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">sma</span><span class=\"token punctuation\">(</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n\nentry_point <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">crossover</span><span class=\"token punctuation\">(</span>sma5<span class=\"token punctuation\">,</span> sma20<span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 골든 크로스(정배열)</span>\nexit_point <span class=\"token operator\">=</span> ta<span class=\"token punctuation\">.</span><span class=\"token function\">crossunder</span><span class=\"token punctuation\">(</span>sma5<span class=\"token punctuation\">,</span> sma20<span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 데드 크로스(역배열)</span>\n\n<span class=\"token keyword\">if</span> entry_point                           <span class=\"token comment\">// 골든 크로스가 되면</span>\n    strategy<span class=\"token punctuation\">.</span><span class=\"token function\">entry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"buy\"</span><span class=\"token punctuation\">,</span> strategy<span class=\"token punctuation\">.</span>long<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 롱 포지션 진입</span>\n<span class=\"token keyword\">if</span> exit_point                            <span class=\"token comment\">// 데드 크로스가 되면</span>\n    strategy<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"buy\"</span><span class=\"token punctuation\">)</span>                <span class=\"token comment\">// 롱 포지션 정리</span>\n\n<span class=\"token function\">plot</span><span class=\"token punctuation\">(</span>strategy<span class=\"token punctuation\">.</span>position_size<span class=\"token punctuation\">)</span></code></pre></div>\n<p>포지션 종료 시 <code class=\"language-text\">strategy.exit()</code> 함수를 사용한다는데, 어떻게 쓰는 건지 잘...</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">strategy<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"exit\"</span><span class=\"token punctuation\">,</span> from_entry<span class=\"token operator\">=</span><span class=\"token string\">\"long\"</span><span class=\"token punctuation\">,</span> profit<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> loss<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<ul>\n<li><strong>profit:</strong> 지정한 이익금액 도달 시 수익 실현</li>\n<li><strong>limit:</strong> 지정가로 포지션 종료</li>\n<li><strong>loss:</strong> 지정한 손실금액 도달 시 손절</li>\n<li><strong>stop:</strong> 지정가로 포지션 종료</li>\n</ul>\n</blockquote>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#-%EB%AA%A9%EC%B0%A8\">🔖 목차</a></p>\n</li>\n<li>\n<p><a href=\"#-%ED%8C%8C%EC%9D%B8-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%9E%80\">🤔 파인 스크립트란?</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%B3%80%EC%88%98\">🥡 변수</a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EB%B3%B8-%EB%B3%80%EC%88%98\">기본 변수</a></li>\n<li><a href=\"#%EB%82%B4%EC%9E%A5-%EB%B3%80%EC%88%98\">내장 변수</a></li>\n<li><a href=\"#%EB%82%A0%EC%A7%9C%EC%99%80-%EC%8B%9C%EA%B0%84\">날짜와 시간</a></li>\n<li><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4\">네임스페이스</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%9E%90%EB%A3%8C-%EA%B5%AC%EC%A1%B0\">📊 자료 구조</a></p>\n<ul>\n<li><a href=\"#%EC%8B%9C%EB%A6%AC%EC%A6%88series\">시리즈(Series)</a></li>\n<li><a href=\"#%EB%B0%B0%EC%97%B4array\">배열(Array)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%A1%B0%EA%B1%B4%EB%AC%B8\">❓ 조건문</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%B0%98%EB%B3%B5%EB%AC%B8\">🔁 반복문</a></p>\n</li>\n<li>\n<p><a href=\"#-%ED%95%A8%EC%88%98\">🏹 함수</a></p>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%EB%82%B4%EC%9E%A5-%ED%95%A8%EC%88%98\">주요 내장 함수</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%A0%84%EB%9E%B5\">🎯 전략</a></p>\n</li>\n</ul>","frontmatter":{"title":"트레이딩뷰 파인 스크립트 간단 정리","description":"트레이딩뷰 파인 스크립트 간단 정리","date":"February 19, 2024","tags":["bitcoin"],"series":"비트코인","previewImage":"bitcoin.jpg","isPrivate":null}},"previous":{"fields":{"slug":"/web/js-summary/"},"frontmatter":{"title":"JavaScript 간단 정리","isPrivate":null}},"next":{"fields":{"slug":"/travel/2024-03-takamatsu-travel/"},"frontmatter":{"title":"2024년 3월 다카마쓰 병맛 여행기","isPrivate":null}}},"pageContext":{"id":"10e929a1-5ad1-5476-9cb4-019a012ae5c8","previousPostId":"914d1a47-4b07-52b8-87b6-00a8bca3b777","nextPostId":"29ee0939-0575-5c35-9531-3890ebedc254"}},"staticQueryHashes":[],"slicesMap":{}}